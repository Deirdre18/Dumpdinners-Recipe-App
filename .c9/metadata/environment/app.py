{"filter":false,"title":"app.py","tooltip":"/app.py","undoManager":{"mark":13,"position":13,"stack":[[{"start":{"row":126,"column":0},"end":{"row":180,"column":0},"action":"remove","lines":["# @app.route('/search', methods=['GET', 'POST'])","# def find_recipes():","#     \"\"\" Find recipes route from Index page search box and checkboxes \"\"\"","#     orig_query = request.args['query']","#     users = mongo.db.register","#     query = {'$regex': re.compile('.*{}.*'.format(orig_query)), '$options': 'i'}","#     results = mongo.db.recipes.find({","#         '$or': [","#             {'recipe_name': query},","#             {'ingredients': query},","#             {'recipe_name': query},","#             {'category_name': query}","#         ]","#     })","   ","#     if request.method == 'POST':","#         search_text = request.form.get(\"search_text\")","#         checkboxes = request.form.getlist(\"check\")","#         # Search textbox (if empty, else text) with no checkboxes checked","#         if len(checkboxes) == 0:","#             if search_text == \"\":","#                 cursor = mongo.db.recipes.find().sort([(\"like_count\", -1)])","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#             else:","#                 cursor = mongo.db.recipes.find({\"$text\": {\"$search\": search_text}}).sort([(\"like_count\", -1)])","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#         # Search textbox (if empty, else text) with one checkbox checked        ","#         elif len(checkboxes) == 1:","#             if search_text == \"\":","#                 cursor = mongo.db.recipes.find({checkboxes[0]: True})","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#             else:","#                 cursor = mongo.db.recipes.find({\"$and\": [{\"$text\": {\"$search\": search_text}}, {checkboxes[0]: True}]}).sort([(\"like_count\", -1)])","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#         # Search textbox (if empty, else text) with two checkboxes checked        ","#         elif len(checkboxes) == 2:","#             if search_text == \"\":","#                 cursor = mongo.db.recipes.find({\"$and\": [{checkboxes[0]: True}, {checkboxes[1]: True}]}).sort([(\"like_count\", -1)])","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#             else:","#                 cursor = mongo.db.recipes.find({\"$and\": [{\"$text\": {\"$search\": search_text}}, {checkboxes[0]: True}, {checkboxes[1]: True}]}).sort([(\"like_count\", -1)]) ","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#         # Search textbox (if empty, else text) with three checkboxes checked        ","#         elif len(checkboxes) == 3:","#             if search_text == \"\":","#                 cursor = mongo.db.recipes.find({\"$and\": [{checkboxes[0]: True}, {checkboxes[1]: True}, {checkboxes[2]: True}]}).sort([ (\"like_count\", -1)])","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","#             else:","#                 cursor = mongo.db.recipes.find({\"$and\": [{\"$text\": {\"$search\": search_text}}, {checkboxes[0]: True}, {checkboxes[1]: True}, {checkboxes[2]: True}]}).sort([(\"like_count\", -1)]) ","#                 matching_recipes = [matching_recipe for matching_recipe in cursor]","       ","#                 return render_template('search.html', query=orig_query, results=results)","","",""],"id":1}],[{"start":{"row":121,"column":36},"end":{"row":122,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":122,"column":0},"end":{"row":122,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":122,"column":12},"end":{"row":123,"column":36},"action":"insert","lines":[" {'recipe_name': query},","            {'category_name': query}"],"id":3}],[{"start":{"row":122,"column":12},"end":{"row":122,"column":13},"action":"remove","lines":[" "],"id":4}],[{"start":{"row":122,"column":24},"end":{"row":122,"column":25},"action":"remove","lines":["e"],"id":5},{"start":{"row":122,"column":23},"end":{"row":122,"column":24},"action":"remove","lines":["m"]},{"start":{"row":122,"column":22},"end":{"row":122,"column":23},"action":"remove","lines":["a"]},{"start":{"row":122,"column":21},"end":{"row":122,"column":22},"action":"remove","lines":["n"]},{"start":{"row":122,"column":20},"end":{"row":122,"column":21},"action":"remove","lines":["_"]},{"start":{"row":122,"column":19},"end":{"row":122,"column":20},"action":"remove","lines":["e"]},{"start":{"row":122,"column":18},"end":{"row":122,"column":19},"action":"remove","lines":["p"]},{"start":{"row":122,"column":17},"end":{"row":122,"column":18},"action":"remove","lines":["i"]},{"start":{"row":122,"column":16},"end":{"row":122,"column":17},"action":"remove","lines":["c"]},{"start":{"row":122,"column":15},"end":{"row":122,"column":16},"action":"remove","lines":["e"]},{"start":{"row":122,"column":14},"end":{"row":122,"column":15},"action":"remove","lines":["r"]}],[{"start":{"row":122,"column":14},"end":{"row":122,"column":15},"action":"insert","lines":["c"],"id":6},{"start":{"row":122,"column":15},"end":{"row":122,"column":16},"action":"insert","lines":["a"]},{"start":{"row":122,"column":16},"end":{"row":122,"column":17},"action":"insert","lines":["l"]}],[{"start":{"row":122,"column":17},"end":{"row":122,"column":18},"action":"insert","lines":["o"],"id":7},{"start":{"row":122,"column":18},"end":{"row":122,"column":19},"action":"insert","lines":["r"]},{"start":{"row":122,"column":19},"end":{"row":122,"column":20},"action":"insert","lines":["i"]},{"start":{"row":122,"column":20},"end":{"row":122,"column":21},"action":"insert","lines":["e"]},{"start":{"row":122,"column":21},"end":{"row":122,"column":22},"action":"insert","lines":["s"]}],[{"start":{"row":123,"column":26},"end":{"row":123,"column":27},"action":"remove","lines":["e"],"id":8},{"start":{"row":123,"column":25},"end":{"row":123,"column":26},"action":"remove","lines":["m"]},{"start":{"row":123,"column":24},"end":{"row":123,"column":25},"action":"remove","lines":["a"]},{"start":{"row":123,"column":23},"end":{"row":123,"column":24},"action":"remove","lines":["n"]},{"start":{"row":123,"column":22},"end":{"row":123,"column":23},"action":"remove","lines":["_"]},{"start":{"row":123,"column":21},"end":{"row":123,"column":22},"action":"remove","lines":["y"]},{"start":{"row":123,"column":20},"end":{"row":123,"column":21},"action":"remove","lines":["r"]},{"start":{"row":123,"column":19},"end":{"row":123,"column":20},"action":"remove","lines":["o"]},{"start":{"row":123,"column":18},"end":{"row":123,"column":19},"action":"remove","lines":["g"]}],[{"start":{"row":123,"column":17},"end":{"row":123,"column":18},"action":"remove","lines":["e"],"id":9},{"start":{"row":123,"column":16},"end":{"row":123,"column":17},"action":"remove","lines":["t"]},{"start":{"row":123,"column":15},"end":{"row":123,"column":16},"action":"remove","lines":["a"]},{"start":{"row":123,"column":14},"end":{"row":123,"column":15},"action":"remove","lines":["c"]}],[{"start":{"row":123,"column":14},"end":{"row":123,"column":15},"action":"insert","lines":["c"],"id":10},{"start":{"row":123,"column":15},"end":{"row":123,"column":16},"action":"insert","lines":["o"]},{"start":{"row":123,"column":16},"end":{"row":123,"column":17},"action":"insert","lines":["o"]},{"start":{"row":123,"column":17},"end":{"row":123,"column":18},"action":"insert","lines":["k"]},{"start":{"row":123,"column":18},"end":{"row":123,"column":19},"action":"insert","lines":["i"]},{"start":{"row":123,"column":19},"end":{"row":123,"column":20},"action":"insert","lines":["n"]},{"start":{"row":123,"column":20},"end":{"row":123,"column":21},"action":"insert","lines":["g"]}],[{"start":{"row":123,"column":21},"end":{"row":123,"column":22},"action":"insert","lines":[" "],"id":11},{"start":{"row":123,"column":22},"end":{"row":123,"column":23},"action":"insert","lines":["t"]},{"start":{"row":123,"column":23},"end":{"row":123,"column":24},"action":"insert","lines":["i"]},{"start":{"row":123,"column":24},"end":{"row":123,"column":25},"action":"insert","lines":["m"]},{"start":{"row":123,"column":25},"end":{"row":123,"column":26},"action":"insert","lines":["e"]}],[{"start":{"row":123,"column":21},"end":{"row":123,"column":22},"action":"remove","lines":[" "],"id":12}],[{"start":{"row":123,"column":21},"end":{"row":123,"column":22},"action":"insert","lines":["_"],"id":13}],[{"start":{"row":121,"column":36},"end":{"row":121,"column":37},"action":"insert","lines":[","],"id":14}]]},"ace":{"folds":[],"scrolltop":1545,"scrollleft":0,"selection":{"start":{"row":121,"column":37},"end":{"row":121,"column":37},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":109,"state":"start","mode":"ace/mode/python"}},"timestamp":1564522704010,"hash":"52649502d068ca3d4bca0930f5db1f235e87fd31"}